document.addEventListener("DOMContentLoaded",function(){initMobileMenu(),initProductActions(),initImageZoom()});function initMobileMenu(){const e=document.querySelector(".menu-toggle");e&&e.addEventListener("click",function(){document.querySelector(".nav-menu ul").classList.toggle("active")});const t=document.querySelectorAll(".nav-menu li > a:not(:only-child)");t.forEach(e=>{e.addEventListener("click",function(e){if(window.innerWidth<768){e.preventDefault();const t=this.nextElementSibling,n="block"===t.style.display;document.querySelectorAll(".nav-menu .dropdown").forEach(e=>{e.style.display="none"}),n||(t.style.display="block")}})})}function initProductActions(){const e=document.querySelectorAll(".add-to-cart");e.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();this.dataset.productId;this.classList.add("adding"),setTimeout(()=>{this.classList.remove("adding"),this.classList.add("added"),showNotification("Produto adicionado ao carrinho!","success"),updateCartCount(1),setTimeout(()=>{this.classList.remove("added")},2e3)},800)})});const t=document.querySelectorAll(".quantity-input");t.forEach(e=>{const t=e.previousElementSibling,n=e.nextElementSibling;t&&n&&(t.addEventListener("click",()=>{const t=parseInt(e.value);t>1&&(e.value=t-1,triggerChangeEvent(e))}),n.addEventListener("click",()=>{const t=parseInt(e.value);e.value=t+1,triggerChangeEvent(e)}))})}function initImageZoom(){const e=document.querySelector(".product-main-image");e&&(e.addEventListener("mousemove",function(e){const{left:t,top:n,width:o,height:i}=this.getBoundingClientRect(),a=(e.clientX-t)/o*100,c=(e.clientY-n)/i*100;this.style.backgroundPosition=`${a}% ${c}%`}),e.addEventListener("mouseleave",function(){this.style.backgroundPosition="center"}));const t=document.querySelectorAll(".product-thumbnail");t.forEach(e=>{e.addEventListener("click",function(){const n=document.querySelector(".product-main-image");if(n){const o=this.dataset.image;n.style.backgroundImage=`url(${o})`,t.forEach(e=>e.classList.remove("active")),this.classList.add("active")}})})}function showNotification(e,t="info"){let n=document.querySelector(".notification");n||(n=document.createElement("div"),n.className="notification",document.body.appendChild(n)),n.className=`notification ${t}`,n.textContent=e,n.classList.add("show"),setTimeout(()=>{n.classList.remove("show")},3e3)}function updateCartCount(e=0){const t=document.querySelector(".cart-count");if(t){const n=parseInt(t.textContent||"0"),o=n+e;t.textContent=o,t.classList.add("pulse"),setTimeout(()=>{t.classList.remove("pulse")},300)}}function triggerChangeEvent(e){const t=new Event("change",{bubbles:!0});e.dispatchEvent(t)}